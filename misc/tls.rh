lookup_host("ws.vi-server.org:443", |addrs1| {
  connect_tcp_race(#{}, addrs1, |tcp1| {
    tls_client(#{domain: "ws.vi-server.org"}, tcp1, |tls1| {
      ws_upgrade(tls1, #{host: "ws.vi-server.org", url: "/mirror"}, |wsframes1| {
        let ws1 = ws_wrap(#{client: true}, wsframes1);
        let stdio1 = create_stdio();
        let chunks1 = stream_chunks(stdio1);
        exchange_packets(#{}, ws1, chunks1)
      })
    })
  })
})
